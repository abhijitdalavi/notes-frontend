(this.webpackJsonpreactjs=this.webpackJsonpreactjs||[]).push([[0],[,,,,function(e,t,a){e.exports=a(16)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(3),s=a.n(c),l=(a(9),a(1));a(10),a(11),a(12);function i(e){var t=Object(n.useState)(e.title),a=Object(l.a)(t,2),c=a[0],s=a[1],i=Object(n.useState)(e.description),r=Object(l.a)(i,2),d=r[0],u=r[1],m=Object(n.useState)(!0),h=Object(l.a)(m,2),p=h[0],g=h[1],f=Object(n.useState)(!1),E=Object(l.a)(f,2),v=E[0],N=E[1],j=Object(n.useState)(e.title),b=Object(l.a)(j,2),O=b[0],w=b[1],C=Object(n.useState)(e.description),S=Object(l.a)(C,2),A=S[0],T=S[1];function k(e,t,a){N(!0),fetch("http://localhost:5000/notes/update/".concat(e),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":!0},body:JSON.stringify({title:t,description:a})}).then((function(){s(t),u(a),N(!1)})).catch((function(e){throw N(!1),e}))}return o.a.createElement("div",{className:"Note-Modal"},o.a.createElement("div",{className:"Note",onClick:function(){return g(!1)}},o.a.createElement("div",{className:"Note-Title"},c),o.a.createElement("div",{className:"Note-Description"},d),o.a.createElement("div",{className:"Note-DeleteSection"},o.a.createElement("img",{src:"edit.png",alt:"edit",description:"Edit"}),o.a.createElement("img",{src:"delete.png",alt:"delete",description:"Delete",onClick:function(t){return function(e,t){t.stopPropagation(),fetch("http://localhost:5000/notes/".concat(e),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":!0},mode:"cors"}).then((function(){window.location.reload()})).catch((function(e){throw e}))}(e._id,t)}}))),!p&&o.a.createElement("div",{className:"Modal",onClick:function(){return g(!0)}},o.a.createElement("div",{className:"Modal-Content",onClick:function(e){e.stopPropagation(),console.log("clicking inside the modal")}},o.a.createElement("div",{className:"Save-Section"},v?o.a.createElement("div",{className:"Modal-Save-Text"},"Saving..."):o.a.createElement("div",{className:"Modal-Save-Text"},"All changes saved")),o.a.createElement("textarea",{rows:"1",className:"Modal-Title",placeholder:"Title",defaultValue:c,onChange:function(t){w(t.target.value),k(e._id,O,A)}}),o.a.createElement("textarea",{rows:"8",className:"Modal-Description",placeholder:"Take a note...",defaultValue:d,onChange:function(t){T(t.target.value),k(e._id,O,A)}}),o.a.createElement("div",{className:"Modal-Close",onClick:function(){return g(!0)}},o.a.createElement("div",{className:"Modal-Close-Text"},"Close")))))}function r(e){var t=Object(n.useState)([]),a=Object(l.a)(t,2),c=a[0],s=a[1],r=Object(n.useState)(!0),d=Object(l.a)(r,2),u=d[0],m=d[1],h="http://localhost:5000/notes/"+e.user.googleId;return Object(n.useEffect)((function(){m(!0),fetch(h,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":!0}}).then((function(e){if(console.log("notes request received"),200===e.status)return e.json();throw new Error("failed to load notes")})).then((function(e){s(e.reverse()),m(!1)})).catch((function(e){throw m(!1),e}))}),[h]),u?o.a.createElement("div",{className:"Notes-Container"},o.a.createElement("img",{src:"loading.svg",alt:"Loading"})):o.a.createElement("div",{className:"Notes-Container"},console.log("here"),c.map((function(e,t){return o.a.createElement(i,Object.assign({key:t},e))})))}a(13);function d(e){var t=Object(n.useState)(""),a=Object(l.a)(t,2),c=a[0],s=a[1],i=Object(n.useState)(""),r=Object(l.a)(i,2),d=r[0],u=r[1];return o.a.createElement("div",{className:"Container"},o.a.createElement("input",{className:"Title",type:"text",placeholder:"Title",onChange:function(e){return s(e.target.value)}}),o.a.createElement("textarea",{className:"Description",type:"text",placeholder:"Take a note...",onChange:function(e){return u(e.target.value)}}),o.a.createElement("div",{className:"Submit",onClick:function(){return function(e,t,a){fetch("http://localhost:5000/notes/add",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":!0},mode:"cors",body:JSON.stringify({googleId:e,title:t,description:a})}).then((function(){window.location.reload()})).catch((function(e){throw e}))}(e.user.googleId,c,d)}},"Add Note"))}function u(e){return e.isLoading?o.a.createElement("div",{className:"LoadingDashboard"},o.a.createElement("img",{src:"loading.svg",alt:"Loading"})):!1===e.isSignedIn?o.a.createElement("div",{className:"NotSignedInDashboard"},o.a.createElement("a",{href:"http://localhost:5000/auth/google"},"Login")):e.isSignedIn?o.a.createElement("div",{className:"Dashboard"},o.a.createElement(d,e),o.a.createElement(r,e)):void 0}a(14);var m=function(e){return e.isSignedIn?o.a.createElement("div",{className:"Header"},o.a.createElement("div",{className:"Dropdown"},o.a.createElement("img",{className:"UserImage",src:e.user.picture,alt:"User"}),o.a.createElement("div",{className:"DropdownContent"},o.a.createElement("a",{href:"http://localhost:5000/auth/logout"},"Logout"))),o.a.createElement("div",{className:"Heading"},"Notes")):o.a.createElement("div",{className:"Header"},o.a.createElement("div",{className:"Dropdown"},o.a.createElement("img",{className:"UserImage",src:"account.png",alt:"User"}),o.a.createElement("div",{className:"DropdownContent"},o.a.createElement("a",{href:"http://localhost:5000/auth/google"},"Login"))),o.a.createElement("div",{className:"Heading"},"Notes"))};a(15);var h=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)({}),i=Object(l.a)(s,2),r=i[0],d=i[1],h=Object(n.useState)(!1),p=Object(l.a)(h,2),g=p[0],f=p[1];Object(n.useEffect)((function(){f(!0),fetch("http://localhost:5000/auth/login/success",{method:"GET",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Credentials":!0,"Access-Control-Allow-Origin":!0}}).then((function(e){if(console.log("request received"),!1===e.success)return!1;if(200===e.status)return e.json();throw new Error("failed to authenticate user")})).then((function(e){console.log(e),!1===e.success?(c(!1),f(!1)):(d(e.user),c(!0),f(!1))})).catch((function(e){throw c(!1),f(!1),e}))}),[]);var E={user:r,isSignedIn:a,isLoading:g};return o.a.createElement("div",{className:"App"},o.a.createElement(m,E),o.a.createElement(u,E))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(h,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[4,1,2]]]);
//# sourceMappingURL=main.537b7561.chunk.js.map